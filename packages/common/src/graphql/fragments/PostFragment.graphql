#import "./UserFragment.graphql"
#import "./ProjectFragment.graphql"
#import "./CommentFragment.graphql"

fragment Post on Post {
  id
  caption
  createdAt
  user {
    ...User
  }
  permissions {
    isOwner
  }
  files: filesConnection(type: IMAGE) {
    edges {
      node {
        id
        type
        uri
      }
    }
  }
  project {
    ...Project
  }
  likes {
    isLiked
    totalCount
  }
  comments: commentsConnection(first: 2) @connection(key: "comments") {
    totalCount
    edges {
      node {
        ...Comment
      }
    }
  }
  likesConnection(first: 3) @connection(key: "likes") {
    edges {
      node {
        user {
          id
          avatarUrl
          username
        }
      }
    }
  }
}